"use strict";(self.webpackChunkhumanoid_robotics_book=self.webpackChunkhumanoid_robotics_book||[]).push([[6915],{25121:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>l,default:()=>p,frontMatter:()=>t,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"ros2/nodes-topics-services","title":"Nodes, Topics, and Services","description":"Understanding ROS 2 communication patterns: nodes, topics, services, and actions","source":"@site/docs/ros2/nodes-topics-services.mdx","sourceDirName":"ros2","slug":"/ros2/nodes-topics-services","permalink":"/humanoid-robotics-book/docs/ros2/nodes-topics-services","draft":false,"unlisted":false,"editUrl":"https://github.com/ibrahimgem/humanoid-robotics-book/edit/main/docs/ros2/nodes-topics-services.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Nodes, Topics, and Services","sidebar_position":2,"description":"Understanding ROS 2 communication patterns: nodes, topics, services, and actions"}}');var r=n(74848),o=n(28453);const t={title:"Nodes, Topics, and Services",sidebar_position:2,description:"Understanding ROS 2 communication patterns: nodes, topics, services, and actions"},l="Nodes, Topics, and Services",c={},a=[{value:"Nodes",id:"nodes",level:2},{value:"Creating a Node",id:"creating-a-node",level:3},{value:"Topics",id:"topics",level:2},{value:"Publisher Example",id:"publisher-example",level:3},{value:"Subscriber Example",id:"subscriber-example",level:3},{value:"Services",id:"services",level:2},{value:"Service Server Example",id:"service-server-example",level:3},{value:"Service Client Example",id:"service-client-example",level:3},{value:"Actions",id:"actions",level:2},{value:"Action Architecture",id:"action-architecture",level:3},{value:"Quality of Service (QoS)",id:"quality-of-service-qos",level:2},{value:"Common QoS Profiles",id:"common-qos-profiles",level:3},{value:"Related Topics",id:"related-topics",level:2},{value:"References",id:"references",level:2}];function d(e){const s={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"nodes-topics-and-services",children:"Nodes, Topics, and Services"})}),"\n",(0,r.jsx)(s.admonition,{title:"Learning Objective",type:"info",children:(0,r.jsx)(s.p,{children:"After completing this chapter, you will understand the core communication patterns in ROS 2: nodes, topics, services, and actions. You will be able to implement publishers, subscribers, servers, and clients for effective robot communication."})}),"\n",(0,r.jsx)(s.p,{children:"ROS 2 provides several communication patterns that allow nodes to exchange information. Understanding these patterns is crucial for developing effective robotic applications."}),"\n",(0,r.jsx)(s.h2,{id:"nodes",children:"Nodes"}),"\n",(0,r.jsx)(s.p,{children:"A node is an executable that uses ROS 2 to communicate with other nodes. Nodes are the fundamental building blocks of a ROS 2 system. Each node can perform specific functions and communicate with other nodes through topics, services, or actions."}),"\n",(0,r.jsx)(s.h3,{id:"creating-a-node",children:"Creating a Node"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\n\nclass MinimalNode(Node):\n    def __init__(self):\n        super().__init__('minimal_publisher')\n        # Node initialization code here\n"})}),"\n",(0,r.jsx)(s.h2,{id:"topics",children:"Topics"}),"\n",(0,r.jsx)(s.p,{children:"Topics provide a publish-subscribe communication model. Publishers send messages to topics, and subscribers receive messages from topics. This is an asynchronous, decoupled communication pattern."}),"\n",(0,r.jsx)(s.h3,{id:"publisher-example",children:"Publisher Example"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\nclass MinimalPublisher(Node):\n    def __init__(self):\n        super().__init__('minimal_publisher')\n        self.publisher_ = self.create_publisher(String, 'topic', 10)\n        timer_period = 0.5  # seconds\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n        self.i = 0\n\n    def timer_callback(self):\n        msg = String()\n        msg.data = 'Hello World: %d' % self.i\n        self.publisher_.publish(msg)\n        self.get_logger().info('Publishing: \"%s\"' % msg.data)\n        self.i += 1\n"})}),"\n",(0,r.jsx)(s.h3,{id:"subscriber-example",children:"Subscriber Example"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\nclass MinimalSubscriber(Node):\n    def __init__(self):\n        super().__init__('minimal_subscriber')\n        self.subscription = self.create_subscription(\n            String,\n            'topic',\n            self.listener_callback,\n            10)\n        self.subscription  # prevent unused variable warning\n\n    def listener_callback(self, msg):\n        self.get_logger().info('I heard: \"%s\"' % msg.data)\n"})}),"\n",(0,r.jsx)(s.h2,{id:"services",children:"Services"}),"\n",(0,r.jsx)(s.p,{children:"Services provide a request-response communication model. A client sends a request to a service, and the service sends back a response. This is a synchronous communication pattern."}),"\n",(0,r.jsx)(s.h3,{id:"service-server-example",children:"Service Server Example"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"from example_interfaces.srv import AddTwoInts\nimport rclpy\nfrom rclpy.node import Node\n\nclass MinimalService(Node):\n    def __init__(self):\n        super().__init__('minimal_service')\n        self.srv = self.create_service(AddTwoInts, 'add_two_ints', self.add_two_ints_callback)\n\n    def add_two_ints_callback(self, request, response):\n        response.sum = request.a + request.b\n        self.get_logger().info('Incoming request\\na: %d b: %d' % (request.a, request.b))\n        return response\n"})}),"\n",(0,r.jsx)(s.h3,{id:"service-client-example",children:"Service Client Example"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"from example_interfaces.srv import AddTwoInts\nimport rclpy\nfrom rclpy.node import Node\n\nclass MinimalClientAsync(Node):\n    def __init__(self):\n        super().__init__('minimal_client_async')\n        self.cli = self.create_client(AddTwoInts, 'add_two_ints')\n        while not self.cli.wait_for_service(timeout_sec=1.0):\n            self.get_logger().info('service not available, waiting again...')\n        self.req = AddTwoInts.Request()\n\n    def send_request(self, a, b):\n        self.req.a = a\n        self.req.b = b\n        self.future = self.cli.call_async(self.req)\n        rclpy.spin_until_future_complete(self, self.future)\n        return self.future.result()\n"})}),"\n",(0,r.jsx)(s.h2,{id:"actions",children:"Actions"}),"\n",(0,r.jsx)(s.p,{children:"Actions are used for long-running tasks that require feedback and the ability to cancel. They combine the features of topics and services."}),"\n",(0,r.jsx)(s.h3,{id:"action-architecture",children:"Action Architecture"}),"\n",(0,r.jsx)(s.mermaid,{value:"graph TD\n    A[Action Client] --\x3e B[Action Server]\n    B --\x3e C[Feedback Topic]\n    B --\x3e D[Result Topic]\n    A --\x3e E[Goal Topic]\n    A --\x3e F[Cancel Topic]\n\n    style A fill:#e1f5fe\n    style B fill:#e1f5fe\n    style C fill:#f3e5f5\n    style D fill:#f3e5f5\n    style E fill:#f3e5f5\n    style F fill:#f3e5f5"}),"\n",(0,r.jsx)(s.h2,{id:"quality-of-service-qos",children:"Quality of Service (QoS)"}),"\n",(0,r.jsx)(s.p,{children:"ROS 2 provides Quality of Service profiles that allow you to configure message delivery guarantees based on your application's needs."}),"\n",(0,r.jsx)(s.h3,{id:"common-qos-profiles",children:"Common QoS Profiles"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Reliable"}),": All messages are delivered, but may be slower"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Best Effort"}),": Messages may be dropped, but delivery is faster"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Keep Last"}),": Only the most recent messages are kept"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Keep All"}),": All messages are kept in the queue"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"related-topics",children:"Related Topics"}),"\n",(0,r.jsxs)(s.p,{children:["For practical Python examples of these concepts, see ",(0,r.jsx)(s.a,{href:"/docs/ros2/rclpy-examples",children:"Python ROS 2 Client Library (rclpy)"}),". To understand how to describe robots in ROS 2, check out ",(0,r.jsx)(s.a,{href:"/docs/ros2/urdf",children:"URDF - Unified Robot Description Format"}),". For an overview of ROS 2, see ",(0,r.jsx)(s.a,{href:"/docs/ros2",children:"ROS 2 Overview"}),"."]}),"\n",(0,r.jsx)(s.h2,{id:"references",children:"References"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:['ROS 2 Documentation. (2023). "ROS 2 Concepts." [Online]. Available: ',(0,r.jsx)(s.a,{href:"https://docs.ros.org/en/humble/Concepts/About-Topics.html",children:"https://docs.ros.org/en/humble/Concepts/About-Topics.html"})]}),"\n",(0,r.jsx)(s.li,{children:'Quigley, M., et al. (2009). "ROS: an open-source Robot Operating System." ICRA Workshop on Open Source Software, vol. 3, no. 3.2, pp. 5.'}),"\n",(0,r.jsx)(s.li,{children:'Macenski, S. (2022). "Professional ROS 2 Development." ROS Press.'}),"\n"]})]})}function p(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>t,x:()=>l});var i=n(96540);const r={},o=i.createContext(r);function t(e){const s=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(o.Provider,{value:s},e.children)}}}]);